(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{VY05:function(t,e,i){"use strict";i.r(e),i.d(e,"GameModule",(function(){return q}));var a=i("ofXK"),n=i("PCNd"),s=i("tyNb"),c=i("quSY"),o=i("/uUt"),r=i("l7P3"),d=i("6s34");const p=t=>t.game,l=Object(r.p)(p,t=>t.deck),b=Object(r.p)(p,t=>t.flipped),m=Object(r.p)(p,t=>t.matched),g=Object(r.p)(p,t=>t.justFlippedIdx),h=Object(r.p)(p,t=>t.move);function u(t,e){return t.toString()===e.toString()}var f=i("R0Ic");const v=Object(f.m)("listAnimation",[Object(f.l)("* => *",[Object(f.g)(":enter",[Object(f.k)({opacity:0}),Object(f.i)("60ms",Object(f.e)("600ms ease-out",Object(f.k)({opacity:1})))],{optional:!0}),Object(f.g)(":leave",Object(f.e)("200ms",Object(f.k)({opacity:0})),{optional:!0})])]);var y=i("AytR");class _{constructor(){this.assetsPath=y.a.production?"assets":"../../../assets"}load(t){t.forEach(t=>{new Audio(`${this.assetsPath}/audio/${t}`).load()})}play(t){new Audio(`${this.assetsPath}/audio/${t}`).play()}}var O=i("fXoL"),w=i("qXsx"),P=i("tgey"),C=i("hZJE"),k=i("NFeN");const M=function(t){return{"game-heading-icon_active":t}},j=function(t){return{"game-heading-text_active":t}};let x=(()=>{class t{set matched(t){this.innerMatched=t,this.justMatched=!0,setTimeout(()=>this.justMatched=!1,1e3)}get matched(){return this.innerMatched}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Eb({type:t,selectors:[["app-game-heading"]],inputs:{matched:"matched",move:"move",cards:"cards"},decls:8,vars:8,consts:[[1,"game-heading-icon","mr-1"],[1,"game-heading-text","mr-3"],[1,"game-heading-icon","mr-1",3,"ngClass"],[1,"game-heading-text","mr-3",3,"ngClass"]],template:function(t,e){1&t&&(O.Qb(0,"mat-icon",0),O.vc(1,"loop"),O.Pb(),O.Qb(2,"span",1),O.vc(3),O.Pb(),O.Qb(4,"mat-icon",2),O.vc(5,"emoji_events"),O.Pb(),O.Qb(6,"span",3),O.vc(7),O.Pb()),2&t&&(O.Ab(3),O.xc("#",e.move,""),O.Ab(1),O.gc("ngClass",O.ic(4,M,e.justMatched&&e.matched)),O.Ab(2),O.gc("ngClass",O.ic(6,j,e.justMatched&&e.matched)),O.Ab(1),O.wc(e.matched+"/"+e.cards/2))},directives:[k.a,a.i],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.game-heading-icon[_ngcontent-%COMP%]{opacity:.33;transition:opacity .25s ease .3s,color .25s ease .3s}.game-heading-icon_active[_ngcontent-%COMP%]{opacity:1;color:#fdd835}.game-heading-text[_ngcontent-%COMP%]{font-weight:500;font-size:16px;transition:color .25s ease .3s}.game-heading-text_active[_ngcontent-%COMP%]{color:#fbc02d}"]}),t})();var A=i("zkoq");const Q=function(t){return{"animation-duration.ms":t}};let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Eb({type:t,selectors:[["app-pie-timer"]],inputs:{time:"time"},decls:4,vars:9,consts:[[1,"pie-timer","bg-body"],[1,"pie","spinner","bg-accent",3,"ngStyle"],[1,"pie","filler","bg-accent",3,"ngStyle"],[1,"mask",3,"ngStyle"]],template:function(t,e){1&t&&(O.Qb(0,"div",0),O.Lb(1,"div",1),O.Lb(2,"div",2),O.Lb(3,"div",3),O.Pb()),2&t&&(O.Ab(1),O.gc("ngStyle",O.ic(3,Q,e.time)),O.Ab(1),O.gc("ngStyle",O.ic(5,Q,e.time)),O.Ab(1),O.gc("ngStyle",O.ic(7,Q,e.time)))},directives:[a.l],styles:[".pie-timer[_ngcontent-%COMP%]{width:24px;height:24px;position:relative;margin:40px auto}.pie-timer[_ngcontent-%COMP%], .pie-timer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.pie[_ngcontent-%COMP%]{width:50%;height:100%;transform-origin:100% 50%;position:absolute}.spinner[_ngcontent-%COMP%]{border-radius:100% 0 0 100%/50% 0 0 50%;z-index:200;border-right:0;-webkit-animation:rota 0s linear 1;animation:rota 0s linear 1}.filler[_ngcontent-%COMP%]{border-radius:0 100% 100% 0/0 50% 50% 0;left:50%;opacity:0;z-index:100;animation:opa 0s steps(1) 1 reverse;border-left:0}.mask[_ngcontent-%COMP%]{width:50%;height:100%;position:absolute;background:inherit;opacity:1;z-index:300;-webkit-animation:opa 0s steps(1) 1;animation:opa 0s steps(1) 1}@-webkit-keyframes rota{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rota{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes opa{0%{opacity:1}50%,to{opacity:0}}@keyframes opa{0%{opacity:1}50%,to{opacity:0}}"],changeDetection:0}),t})();var D=i("Wp6s"),z=i("FKr1");const T=function(t){return{"card-wrapper_disabled":t}},S=function(t){return{card_flipped:t}};let $=(()=>{class t{constructor(t){this.sound=t}set disabled(t){this.isDisabled=t}set flipped(t){this.isFlipped=t,!0===t&&this.sound.play("card.wav")}}return t.\u0275fac=function(e){return new(e||t)(O.Kb(_))},t.\u0275cmp=O.Eb({type:t,selectors:[["app-card"]],inputs:{card:"card",disabled:"disabled",flipped:"flipped"},decls:8,vars:9,consts:[[1,"card-wrapper",3,"ngClass"],[1,"card",3,"ngClass"],["matRipple","",1,"card__back",3,"matRippleDisabled"],[1,"card__icon"],[1,"card__face"],[3,"className"]],template:function(t,e){1&t&&(O.Qb(0,"div",0),O.Qb(1,"div",1),O.Qb(2,"mat-card",2),O.Qb(3,"mat-icon",3),O.vc(4,"lightbulb_outline"),O.Pb(),O.Pb(),O.Qb(5,"mat-card",4),O.Qb(6,"mat-icon",5),O.vc(7),O.Pb(),O.Pb(),O.Pb(),O.Pb()),2&t&&(O.gc("ngClass",O.ic(5,T,e.isDisabled&&!e.isFlipped)),O.Ab(1),O.gc("ngClass",O.ic(7,S,e.isFlipped)),O.Ab(1),O.gc("matRippleDisabled",e.isDisabled||e.isFlipped),O.Ab(4),O.gc("className","card__icon card-color_"+e.card.color),O.Ab(1),O.xc(" ",e.card.suit," "))},directives:[a.i,D.a,z.f,k.a],styles:["[_nghost-%COMP%]{height:100%;width:100%}.card-wrapper[_ngcontent-%COMP%]{perspective:1000px;opacity:1;transition:opacity .3s}.card-wrapper_disabled[_ngcontent-%COMP%]{opacity:.5}.card[_ngcontent-%COMP%]{transform-style:preserve-3d;position:relative;transform:rotateY(0deg);transition:transform .3s}.card_flipped[_ngcontent-%COMP%]{transform:rotateY(180deg);transition-duration:.6s}.card[_ngcontent-%COMP%], .card-wrapper[_ngcontent-%COMP%], .card__back[_ngcontent-%COMP%], .card__face[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.card__icon[_ngcontent-%COMP%]{height:auto;width:auto;font-size:80px}.card__back[_ngcontent-%COMP%], .card__face[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0}.card__back[_ngcontent-%COMP%]{z-index:2;transform:rotateY(0deg);background-color:#90a4ae;color:hsla(0,0%,100%,.1)}.card__face[_ngcontent-%COMP%]{transform:rotateY(180deg);background-color:#fff;color:#455a64}"]}),t})();function F(t,e){if(1&t&&O.Lb(0,"app-pie-timer",9),2&t){const t=O.bc(2);O.gc("time",t.moveDelay)}}function R(t,e){if(1&t){const t=O.Rb();O.Qb(0,"div",10),O.Xb("click",(function(){return O.mc(t),O.bc(2).removeMoveDelay()})),O.Pb()}}const L=function(t){return{"game__card-matched":t}};function E(t,e){if(1&t){const t=O.Rb();O.Qb(0,"mat-grid-tile",11),O.Qb(1,"app-card",12),O.Xb("click",(function(){O.mc(t);const i=e.index;return O.bc(2).onClickCard(i)})),O.Pb(),O.Pb()}if(2&t){const t=e.$implicit,i=e.index,a=O.bc(2);O.Ab(1),O.gc("card",t)("flipped",a.flipped[i])("ngClass",O.ic(4,L,a.matched[i]))("disabled",a.flippingDisabled)}}function K(t,e){if(1&t){const t=O.Rb();O.Qb(0,"div"),O.Qb(1,"app-page-header"),O.Lb(2,"app-page-header-back",1),O.Lb(3,"app-game-heading",2),O.cc(4,"async"),O.uc(5,F,1,1,"app-pie-timer",3),O.Pb(),O.Qb(6,"div",4),O.Qb(7,"div",5),O.uc(8,R,1,0,"div",6),O.Qb(9,"mat-grid-list",7),O.Xb("resize",(function(e){return O.mc(t),O.bc().onResize(e)}),!1,O.lc),O.uc(10,E,2,6,"mat-grid-tile",8),O.Pb(),O.Pb(),O.Pb(),O.Pb()}if(2&t){const t=e.ngIf,i=O.bc();O.Ab(2),O.gc("link","/"),O.Ab(1),O.gc("move",O.dc(4,9,i.move$))("matched",i.matchedPairs)("cards",t.length),O.Ab(2),O.gc("ngIf",i.showTimer),O.Ab(3),O.gc("ngIf",i.flippingDisabled),O.Ab(1),O.gc("cols",i.columns)("@listAnimation",t.length),O.Ab(1),O.gc("ngForOf",t)}}let N=(()=>{class t{constructor(e,i,a){this.store=e,this.notification=i,this.sound=a,this.moveDelay=3e3,a.load(["card.wav","success.flac","win.wav"]),this.columns=t.getColumns(window.innerWidth),this.subscription=new c.a,this.flippingDisabled=!1,this.deck$=e.pipe(Object(r.s)(l)),this.flipped$=e.pipe(Object(r.s)(b),Object(o.a)((t,e)=>u(t,e))),this.matched$=e.pipe(Object(r.s)(m),Object(o.a)((t,e)=>u(t,e))),this.move$=e.pipe(Object(r.s)(h),Object(o.a)()),this.justFlippedCardIdx$=e.pipe(Object(r.s)(g))}static getColumns(t){let e;return e=t>=992?6:t>=768?4:3,e}onClickCard(t){!1===this.flipped[t]&&!1===this.flippingDisabled&&this.store.dispatch(Object(d.a)({cardIndex:t}))}onMatchJustFlippedCard(){this.showTimer=!1,setTimeout(()=>this.sound.play("success.flac"),333),this.matched.every(t=>t)?setTimeout(()=>{this.sound.play("win.wav"),this.notification.showSuccess("All pairs matched!",2600)},600):setTimeout(()=>{clearTimeout(this.delayTimeoutId),this.store.dispatch(Object(d.g)())},500)}ngOnInit(){this.subscription.add(this.justFlippedCardIdx$.subscribe(t=>{2===t.length?(this.flippingDisabled=!0,this.showTimer=!0,this.delayTimeoutId=setTimeout(()=>{this.store.dispatch(Object(d.g)()),this.showTimer=!1,this.sound.play("card.wav")},3e3)):this.flippingDisabled=!1})),this.subscription.add(this.flipped$.subscribe(t=>this.flipped=t)),this.subscription.add(this.matched$.subscribe(t=>{this.matched=t,this.matchedPairs=t.filter(t=>t).length/2,t.some(t=>t)&&this.onMatchJustFlippedCard()}))}removeMoveDelay(){clearTimeout(this.delayTimeoutId),this.store.dispatch(Object(d.g)()),this.showTimer=!1,this.sound.play("card.wav")}ngOnDestroy(){this.subscription.unsubscribe()}onResize(e){this.columns=t.getColumns(e.target.innerWidth)}}return t.\u0275fac=function(e){return new(e||t)(O.Kb(r.h),O.Kb(w.a),O.Kb(_))},t.\u0275cmp=O.Eb({type:t,selectors:[["app-game"]],features:[O.zb([_])],decls:2,vars:3,consts:[[4,"ngIf"],["ariaLabel","Back to homepage",3,"link"],[3,"move","matched","cards"],[3,"time",4,"ngIf"],[1,"page-content","game-content"],[1,"container","position-relative"],["class","cover game-cover",3,"click",4,"ngIf"],["rowHeight","1:1.2","gutterSize","16px",3,"cols","resize"],["class","overflow-visible",4,"ngFor","ngForOf"],[3,"time"],[1,"cover","game-cover",3,"click"],[1,"overflow-visible"],[3,"card","flipped","ngClass","disabled","click"]],template:function(t,e){1&t&&(O.uc(0,K,11,11,"div",0),O.cc(1,"async")),2&t&&O.gc("ngIf",O.dc(1,1,e.deck$))},directives:[a.k,P.a,C.a,x,A.a,a.j,I,A.c,$,a.i],pipes:[a.b],styles:[".game-content[_ngcontent-%COMP%], [_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.game__card-matched[_ngcontent-%COMP%]{-webkit-animation:ScaleAnimation .5s ease .3s;animation:ScaleAnimation .5s ease .3s}.game-cover[_ngcontent-%COMP%]{z-index:1050}@-webkit-keyframes ScaleAnimation{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes ScaleAnimation{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}"],data:{animation:[v]}}),t})(),X=(()=>{class t{constructor(t){this.store=t}resolve(t,e){this.store.dispatch(Object(d.d)())}}return t.\u0275fac=function(e){return new(e||t)(O.Ub(r.h))},t.\u0275prov=O.Gb({token:t,factory:t.\u0275fac}),t})();const Y=[{path:"",component:N,resolve:[X],runGuardsAndResolvers:"always"},{path:"new",redirectTo:""}];let J=(()=>{class t{}return t.\u0275mod=O.Ib({type:t}),t.\u0275inj=O.Hb({factory:function(e){return new(e||t)},imports:[[s.f.forChild(Y)],s.f]}),t})(),q=(()=>{class t{}return t.\u0275mod=O.Ib({type:t}),t.\u0275inj=O.Hb({factory:function(e){return new(e||t)},providers:[X],imports:[[a.c,n.a,J]]}),t})()}}]);